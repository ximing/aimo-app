{
  "project": "相关笔记无限滚动列表",
  "branchName": "ralph/feature-20260219",
  "description": "在备忘录详情页底部添加\"相关笔记\"区域，展示与当前备忘录相关的其他笔记。支持无限滚动加载，每条笔记展示内容预览、创建时间和相关性分数（以5格形式展示）。",
  "userStories": [
    {
      "id": "US-001",
      "title": "创建相关笔记服务接口",
      "description": "作为开发者，我需要调用后端 API 获取相关笔记数据，支持分页和分数展示。",
      "acceptanceCriteria": [
        "创建 getRelatedMemos(memoId, page, pageSize) 函数",
        "返回类型包含 id, content, createTime, relevanceScore 字段",
        "错误处理：API 失败时抛出异常供调用方处理",
        "Typecheck/lint 通过"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Completed: Added RelatedMemoItem interface, updated RelatedMemosResponse with pagination, updated getRelatedMemos API function with page/pageSize parameters"
    },
    {
      "id": "US-002",
      "title": "创建相关笔记 Service 层",
      "description": "作为开发者，我需要使用 @rabjs/react Service 管理相关笔记的状态和分页逻辑。",
      "acceptanceCriteria": [
        "创建 services/related-memo-service.ts，继承 Service 类",
        "包含 relatedMemos 数组、loading、hasMore、currentPage 状态",
        "实现 loadRelatedMemos(memoId) 方法，自动处理分页",
        "实现 reset() 方法用于切换笔记时重置状态",
        "Typecheck/lint 通过"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "创建相关笔记列表组件",
      "description": "作为用户，我可以在备忘录详情页看到相关笔记列表，支持无限滚动加载。",
      "acceptanceCriteria": [
        "创建 components/memos/related-memo-list.tsx",
        "使用 bindServices 绑定 RelatedMemoService",
        "实现无限滚动：当用户滚动到底部时自动加载下一页",
        "加载时显示 loading 指示器",
        "没有更多数据时显示\"已加载全部相关笔记\"",
        "笔记卡片样式与现有列表风格一致",
        "Typecheck/lint 通过",
        "使用 dev-browser skill 在浏览器中验证"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "创建相关性分数组件",
      "description": "作为用户，我可以直观地看到每条笔记与当前笔记的相关程度。",
      "acceptanceCriteria": [
        "创建 components/memos/relevance-score.tsx",
        "接收 score 参数（0-1 之间的原始分数）",
        "使用 getRelevanceScore 函数转换为 0-5 分",
        "展示为 5 个格子/圆点，填充数量代表分数（如 3/5 分填充 3 个）",
        "悬停时显示具体分数（如 \"相关度: 3/5\"）",
        "不同分数段使用不同颜色（如低分灰色、中等黄色、高分绿色）",
        "Typecheck/lint 通过",
        "使用 dev-browser skill 在浏览器中验证"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Completed: Created RelevanceScore component with 5-bar display, color-coded by score ranges, and tooltip on press"
    },
    {
      "id": "US-005",
      "title": "集成相关笔记到详情页",
      "description": "作为用户，我可以在查看备忘录详情时直接看到下方的相关笔记。",
      "acceptanceCriteria": [
        "在 app/(memos)/[id].tsx 底部添加\"相关笔记\"区块",
        "使用 RelatedMemoList 组件",
        "当 memoId 变化时，重置相关笔记状态",
        "区块标题为\"相关笔记\"，带图标",
        "无相关笔记时显示\"暂无相关笔记\"提示",
        "Typecheck/lint 通过",
        "使用 dev-browser skill 在浏览器中验证"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    }
  ]
}